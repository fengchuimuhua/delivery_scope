package com.sankuai.banma.ai.main;

import com.sankuai.banma.ai.algo.AoiSelectAlgo;
import com.sankuai.banma.ai.utils.AmapUtils;
import com.sankuai.banma.ai.utils.GeoUtils;
import com.sankuai.meituan.banma.shiparea.helper.PolygonHelper;
import com.vividsolutions.jts.geom.Point;

import java.io.BufferedWriter;
import java.io.FileWriter;
import java.util.List;
import java.util.Map;

/**
 * Created by zhangrunfeng on 2019-08-23
 */
public class Main {
    public static void main(String[] args) {
        // 北京配送范围绘制
//        long poiId = 4907742L;
//        String cityName = "beijing";
//        String oldScope = "[{\"x\":39968603,\"y\":116453248},{\"x\":39970163,\"y\":116455178},{\"x\":39970394,\"y\":116456609},{\"x\":39970565,\"y\":116456619},{\"x\":39970945,\"y\":116456097},{\"x\":39975092,\"y\":116463107},{\"x\":39972690,\"y\":116466184},{\"x\":39971860,\"y\":116466540},{\"x\":39970089,\"y\":116466110},{\"x\":39969276,\"y\":116465460},{\"x\":39968556,\"y\":116465182},{\"x\":39969281,\"y\":116466107},{\"x\":39968895,\"y\":116466957},{\"x\":39969050,\"y\":116467441},{\"x\":39969963,\"y\":116468300},{\"x\":39969577,\"y\":116469090},{\"x\":39970451,\"y\":116472089},{\"x\":39971998,\"y\":116471755},{\"x\":39972721,\"y\":116471925},{\"x\":39973406,\"y\":116472339},{\"x\":39975267,\"y\":116474280},{\"x\":39975617,\"y\":116474542},{\"x\":39975752,\"y\":116474413},{\"x\":39977247,\"y\":116475911},{\"x\":39973901,\"y\":116471654},{\"x\":39974375,\"y\":116472120},{\"x\":39974731,\"y\":116472146},{\"x\":39979301,\"y\":116477215},{\"x\":39979209,\"y\":116477328},{\"x\":39979364,\"y\":116477783},{\"x\":39979749,\"y\":116478275},{\"x\":39979669,\"y\":116478645},{\"x\":39977977,\"y\":116481285},{\"x\":39973745,\"y\":116476602},{\"x\":39973585,\"y\":116476616},{\"x\":39971996,\"y\":116479095},{\"x\":39971588,\"y\":116478646},{\"x\":39971412,\"y\":116478717},{\"x\":39971834,\"y\":116479381},{\"x\":39971197,\"y\":116480850},{\"x\":39970857,\"y\":116482651},{\"x\":39968520,\"y\":116482411},{\"x\":39967919,\"y\":116482081},{\"x\":39967769,\"y\":116482175},{\"x\":39968360,\"y\":116489709},{\"x\":39968248,\"y\":116489872},{\"x\":39968384,\"y\":116489983},{\"x\":39972215,\"y\":116489981},{\"x\":39971898,\"y\":116490629},{\"x\":39971809,\"y\":116491339},{\"x\":39971769,\"y\":116499479},{\"x\":39973622,\"y\":116499555},{\"x\":39973709,\"y\":116503053},{\"x\":39976502,\"y\":116503041},{\"x\":39980268,\"y\":116503873},{\"x\":39980239,\"y\":116506239},{\"x\":39980475,\"y\":116506452},{\"x\":39980579,\"y\":116503912},{\"x\":39987860,\"y\":116503960},{\"x\":39987900,\"y\":116506885},{\"x\":39988120,\"y\":116508395},{\"x\":39988619,\"y\":116509869},{\"x\":39988755,\"y\":116509907},{\"x\":39988769,\"y\":116509894},{\"x\":39988819,\"y\":116510117},{\"x\":39988762,\"y\":116510173},{\"x\":39990447,\"y\":116510710},{\"x\":39991917,\"y\":116511881},{\"x\":39991917,\"y\":116511864},{\"x\":39992378,\"y\":116512146},{\"x\":39995399,\"y\":116511208},{\"x\":39995395,\"y\":116511154},{\"x\":39995376,\"y\":116509045},{\"x\":39998073,\"y\":116509061},{\"x\":39999210,\"y\":116508748},{\"x\":39999211,\"y\":116508748},{\"x\":39999320,\"y\":116508718},{\"x\":40000064,\"y\":116508288},{\"x\":40001606,\"y\":116506986},{\"x\":40003229,\"y\":116504992},{\"x\":40005220,\"y\":116507216},{\"x\":40005641,\"y\":116507207},{\"x\":40012433,\"y\":116513434},{\"x\":40015912,\"y\":116506561},{\"x\":40023537,\"y\":116505384},{\"x\":40022832,\"y\":116498512},{\"x\":40033432,\"y\":116497263},{\"x\":40033062,\"y\":116479906},{\"x\":40033684,\"y\":116470923},{\"x\":40029650,\"y\":116465506},{\"x\":40028003,\"y\":116463032},{\"x\":40027807,\"y\":116463058},{\"x\":40027985,\"y\":116459760},{\"x\":40028662,\"y\":116459724},{\"x\":40027010,\"y\":116459449},{\"x\":40025679,\"y\":116459919},{\"x\":40023654,\"y\":116458285},{\"x\":40020844,\"y\":116456830},{\"x\":40021145,\"y\":116451606},{\"x\":40021040,\"y\":116451499},{\"x\":40017716,\"y\":116451619},{\"x\":40017520,\"y\":116452485},{\"x\":40017005,\"y\":116452653},{\"x\":40016226,\"y\":116455198},{\"x\":40014829,\"y\":116454808},{\"x\":40015421,\"y\":116453668},{\"x\":40014419,\"y\":116454402},{\"x\":40014504,\"y\":116455402},{\"x\":40008288,\"y\":116453326},{\"x\":40008111,\"y\":116447251},{\"x\":40008506,\"y\":116439113},{\"x\":40008089,\"y\":116438819},{\"x\":40004681,\"y\":116438819},{\"x\":40002763,\"y\":116438424},{\"x\":40002720,\"y\":116438213},{\"x\":40002351,\"y\":116438127},{\"x\":40002950,\"y\":116436352},{\"x\":40003360,\"y\":116433022},{\"x\":40003264,\"y\":116432909},{\"x\":40005016,\"y\":116428524},{\"x\":40005015,\"y\":116425479},{\"x\":40001719,\"y\":116425233},{\"x\":39998881,\"y\":116424746},{\"x\":39993715,\"y\":116424187},{\"x\":39989187,\"y\":116423947},{\"x\":39988909,\"y\":116425035},{\"x\":39989178,\"y\":116426842},{\"x\":39989333,\"y\":116430848},{\"x\":39988894,\"y\":116430420},{\"x\":39988775,\"y\":116430564},{\"x\":39988760,\"y\":116437612},{\"x\":39988174,\"y\":116439147},{\"x\":39986890,\"y\":116440786},{\"x\":39986344,\"y\":116440952},{\"x\":39985580,\"y\":116440770},{\"x\":39986203,\"y\":116441287},{\"x\":39986002,\"y\":116441766},{\"x\":39984469,\"y\":116440834},{\"x\":39985667,\"y\":116442583},{\"x\":39986160,\"y\":116443861},{\"x\":39986198,\"y\":116444396},{\"x\":39985943,\"y\":116445692},{\"x\":39985328,\"y\":116447378},{\"x\":39983429,\"y\":116450464},{\"x\":39983051,\"y\":116448097},{\"x\":39981645,\"y\":116445118},{\"x\":39983594,\"y\":116443309},{\"x\":39984136,\"y\":116440746},{\"x\":39981455,\"y\":116439105},{\"x\":39978679,\"y\":116437088},{\"x\":39978519,\"y\":116437161},{\"x\":39978027,\"y\":116442913},{\"x\":39976112,\"y\":116442850},{\"x\":39975206,\"y\":116443517},{\"x\":39972611,\"y\":116447060},{\"x\":39972052,\"y\":116446611},{\"x\":39971850,\"y\":116446984},{\"x\":39972389,\"y\":116447532},{\"x\":39969879,\"y\":116451076},{\"x\":39969828,\"y\":116450620},{\"x\":39969636,\"y\":116450589},{\"x\":39969623,\"y\":116450955},{\"x\":39969451,\"y\":116451025},{\"x\":39969515,\"y\":116451503},{\"x\":39968617,\"y\":116452781},{\"x\":39968603,\"y\":116453248},{\"x\":39968603,\"y\":116453248}]";
//
//        String aoiDataPath = "data/aoi_data/" + cityName + "/" + cityName + "_poi_aoiinfo.txt";
//        String blockDataPath = "data/block_data/" + cityName + "/" + cityName + "_poi_blockinfo.txt";
//
//        double maxDistThres = 8000;
//
//        AoiSelectAlgo algo = new AoiSelectAlgo(aoiDataPath, blockDataPath);
//        algo.MAX_AREA_THRESHOLD = PolygonHelper.getArea(PolygonHelper.createPolygonFromArea(oldScope));
//
//        algo.loadAoiDistMap("data/aoi_data/" + cityName + "/" + cityName + "_poi_aoi_dist.txt");
//        algo.loadBlockDistMap("data/block_data/" + cityName + "/" + cityName + "_poi_block_dist.txt");
//
//        algo.compAoiScore();
//        algo.compBlockScore();
//        algo.selectAoi();
//        algo.selectBlock();
//
//        algo.write(poiId, oldScope, cityName, maxDistThres);

        // 青岛配送范围绘制
//        long poiId = 2581733L;
//        String cityName = "qingdao";
//        String oldScope = "[{\"y\":120446028,\"x\":36071742},{\"y\":120445953,\"x\":36071896},{\"y\":120437391,\"x\":36072544},{\"y\":120445689,\"x\":36076872},{\"y\":120448304,\"x\":36080224},{\"y\":120454943,\"x\":36080822},{\"y\":120457642,\"x\":36083132},{\"y\":120461664,\"x\":36083132},{\"y\":120459071,\"x\":36081311},{\"y\":120459107,\"x\":36081134},{\"y\":120465393,\"x\":36079773},{\"y\":120514485,\"x\":36091362},{\"y\":120516306,\"x\":36095763},{\"y\":120511699,\"x\":36100997},{\"y\":120506367,\"x\":36105198},{\"y\":120515202,\"x\":36108821},{\"y\":120515148,\"x\":36109149},{\"y\":120507934,\"x\":36109560},{\"y\":120507893,\"x\":36109784},{\"y\":120499941,\"x\":36110391},{\"y\":120499802,\"x\":36110219},{\"y\":120499802,\"x\":36095216},{\"y\":120498440,\"x\":36095198},{\"y\":120497094,\"x\":36095366},{\"y\":120492334,\"x\":36096486},{\"y\":120492458,\"x\":36099712},{\"y\":120492212,\"x\":36100699},{\"y\":120490619,\"x\":36102401},{\"y\":120489765,\"x\":36104758},{\"y\":120490811,\"x\":36105514},{\"y\":120490541,\"x\":36106213},{\"y\":120488899,\"x\":36106726},{\"y\":120488742,\"x\":36107088},{\"y\":120487692,\"x\":36108018},{\"y\":120485622,\"x\":36109136},{\"y\":120482592,\"x\":36109646},{\"y\":120480645,\"x\":36109707},{\"y\":120481543,\"x\":36111386},{\"y\":120483672,\"x\":36114205},{\"y\":120485656,\"x\":36113570},{\"y\":120486190,\"x\":36114448},{\"y\":120486099,\"x\":36115219},{\"y\":120484648,\"x\":36115676},{\"y\":120485356,\"x\":36117677},{\"y\":120486116,\"x\":36139803},{\"y\":120491158,\"x\":36138942},{\"y\":120488527,\"x\":36142577},{\"y\":120486889,\"x\":36144394},{\"y\":120487172,\"x\":36145616},{\"y\":120487059,\"x\":36145820},{\"y\":120485403,\"x\":36145928},{\"y\":120484496,\"x\":36145776},{\"y\":120482475,\"x\":36144840},{\"y\":120482128,\"x\":36144926},{\"y\":120473225,\"x\":36149325},{\"y\":120472455,\"x\":36149811},{\"y\":120472582,\"x\":36150154},{\"y\":120472246,\"x\":36150290},{\"y\":120468248,\"x\":36147468},{\"y\":120465454,\"x\":36145944},{\"y\":120461812,\"x\":36144840},{\"y\":120459235,\"x\":36143837},{\"y\":120459232,\"x\":36143654},{\"y\":120459638,\"x\":36143479},{\"y\":120458888,\"x\":36141780},{\"y\":120458686,\"x\":36140814},{\"y\":120459516,\"x\":36137537},{\"y\":120449350,\"x\":36135200},{\"y\":120448323,\"x\":36141301},{\"y\":120451901,\"x\":36142521},{\"y\":120448384,\"x\":36141833},{\"y\":120445810,\"x\":36140686},{\"y\":120444048,\"x\":36140124},{\"y\":120440976,\"x\":36139733},{\"y\":120440788,\"x\":36143523},{\"y\":120441018,\"x\":36145932},{\"y\":120440485,\"x\":36147698},{\"y\":120445384,\"x\":36147802},{\"y\":120446095,\"x\":36148043},{\"y\":120448074,\"x\":36149264},{\"y\":120449012,\"x\":36150652},{\"y\":120448966,\"x\":36150878},{\"y\":120446885,\"x\":36151642},{\"y\":120442798,\"x\":36151718},{\"y\":120439386,\"x\":36152660},{\"y\":120439107,\"x\":36154603},{\"y\":120438818,\"x\":36155045},{\"y\":120435906,\"x\":36154489},{\"y\":120435801,\"x\":36153490},{\"y\":120436064,\"x\":36152440},{\"y\":120436190,\"x\":36150962},{\"y\":120435874,\"x\":36149821},{\"y\":120432173,\"x\":36149635},{\"y\":120429982,\"x\":36148917},{\"y\":120427794,\"x\":36148858},{\"y\":120427405,\"x\":36147570},{\"y\":120427226,\"x\":36144962},{\"y\":120423241,\"x\":36145449},{\"y\":120422397,\"x\":36145331},{\"y\":120422044,\"x\":36136156},{\"y\":120420834,\"x\":36135182},{\"y\":120419800,\"x\":36134523},{\"y\":120418356,\"x\":36134816},{\"y\":120414634,\"x\":36134370},{\"y\":120412150,\"x\":36134754},{\"y\":120410305,\"x\":36135236},{\"y\":120409866,\"x\":36134834},{\"y\":120409936,\"x\":36134531},{\"y\":120413620,\"x\":36132706},{\"y\":120413298,\"x\":36132378},{\"y\":120413361,\"x\":36132059},{\"y\":120415008,\"x\":36131322},{\"y\":120413859,\"x\":36130525},{\"y\":120411502,\"x\":36128355},{\"y\":120412128,\"x\":36127082},{\"y\":120414260,\"x\":36125194},{\"y\":120413182,\"x\":36125036},{\"y\":120412342,\"x\":36124682},{\"y\":120412183,\"x\":36124294},{\"y\":120409523,\"x\":36121803},{\"y\":120408433,\"x\":36120553},{\"y\":120408979,\"x\":36119882},{\"y\":120411241,\"x\":36118852},{\"y\":120411132,\"x\":36117536},{\"y\":120411395,\"x\":36116276},{\"y\":120408322,\"x\":36116118},{\"y\":120408244,\"x\":36114030},{\"y\":120407604,\"x\":36111632},{\"y\":120401259,\"x\":36112526},{\"y\":120399871,\"x\":36111094},{\"y\":120398697,\"x\":36110343},{\"y\":120398696,\"x\":36110124},{\"y\":120398850,\"x\":36110042},{\"y\":120399811,\"x\":36110681},{\"y\":120400572,\"x\":36109955},{\"y\":120399378,\"x\":36108773},{\"y\":120399057,\"x\":36105354},{\"y\":120401471,\"x\":36104358},{\"y\":120401422,\"x\":36104081},{\"y\":120398207,\"x\":36104039},{\"y\":120398114,\"x\":36103909},{\"y\":120399175,\"x\":36100713},{\"y\":120398784,\"x\":36099174},{\"y\":120399005,\"x\":36097145},{\"y\":120399248,\"x\":36096793},{\"y\":120402627,\"x\":36098528},{\"y\":120403678,\"x\":36097968},{\"y\":120403949,\"x\":36097648},{\"y\":120403081,\"x\":36097067},{\"y\":120402774,\"x\":36096551},{\"y\":120402765,\"x\":36096121},{\"y\":120403246,\"x\":36094536},{\"y\":120403415,\"x\":36094499},{\"y\":120404596,\"x\":36095834},{\"y\":120408827,\"x\":36097064},{\"y\":120411672,\"x\":36098613},{\"y\":120413314,\"x\":36098762},{\"y\":120417518,\"x\":36098158},{\"y\":120419581,\"x\":36094676},{\"y\":120418248,\"x\":36093903},{\"y\":120416570,\"x\":36092340},{\"y\":120414656,\"x\":36089608},{\"y\":120414317,\"x\":36089543},{\"y\":120410722,\"x\":36084474},{\"y\":120409875,\"x\":36083868},{\"y\":120407020,\"x\":36085293},{\"y\":120407739,\"x\":36084654},{\"y\":120406847,\"x\":36083677},{\"y\":120406924,\"x\":36083206},{\"y\":120408581,\"x\":36083132},{\"y\":120408515,\"x\":36082900},{\"y\":120408815,\"x\":36082759},{\"y\":120409594,\"x\":36083132},{\"y\":120445712,\"x\":36083132},{\"y\":120445283,\"x\":36082003},{\"y\":120442992,\"x\":36082324},{\"y\":120440658,\"x\":36080903},{\"y\":120437445,\"x\":36076953},{\"y\":120437315,\"x\":36075886},{\"y\":120436852,\"x\":36076005},{\"y\":120435866,\"x\":36077487},{\"y\":120435612,\"x\":36077528},{\"y\":120434714,\"x\":36076188},{\"y\":120432376,\"x\":36074994},{\"y\":120431302,\"x\":36075005},{\"y\":120429990,\"x\":36075598},{\"y\":120428380,\"x\":36074073},{\"y\":120430971,\"x\":36069816},{\"y\":120434590,\"x\":36071338},{\"y\":120435384,\"x\":36069778},{\"y\":120435382,\"x\":36069482},{\"y\":120435756,\"x\":36069299},{\"y\":120436827,\"x\":36067658},{\"y\":120443082,\"x\":36071154},{\"y\":120443755,\"x\":36071304},{\"y\":120444954,\"x\":36070958},{\"y\":120445647,\"x\":36071204},{\"y\":120446028,\"x\":36071742}]";
//
//        String aoiDataPath = "data/aoi_data/" + cityName + "/" + cityName + "_poi_aoiinfo.txt";
//        String blockDataPath = "data/block_data/" + cityName + "/" + cityName + "_poi_blockinfo.txt";
//
//        double maxDistThres = 8000;
//
//        AoiSelectAlgo algo = new AoiSelectAlgo(aoiDataPath, blockDataPath);
//        algo.MAX_AREA_THRESHOLD = PolygonHelper.getArea(PolygonHelper.createPolygonFromArea(oldScope));
//
//        algo.loadAoiDistMap("data/aoi_data/" + cityName + "/" + cityName + "_poi_aoi_dist.txt");
////        algo.loadBlockDistMap("data/block_data/" + cityName + "/" + cityName + "_poi_block_dist.txt");
//
//        algo.compAoiScore();
//        algo.compBlockScore();
//        algo.selectAoi();
//        algo.selectBlock();
//
//        algo.write(poiId, oldScope, cityName, maxDistThres);

        // 威海配送范围绘制
//        long poiId = 7411997L;
//        String cityName = "weihai";
//        String oldScope = "[{\"x\":37495173,\"y\":122130797},{\"x\":37494016,\"y\":122129553},{\"x\":37492620,\"y\":122129510},{\"x\":37491802,\"y\":122126978},{\"x\":37489725,\"y\":122126034},{\"x\":37490270,\"y\":122123330},{\"x\":37489895,\"y\":122119639},{\"x\":37490611,\"y\":122118009},{\"x\":37494084,\"y\":122117708},{\"x\":37492483,\"y\":122113202},{\"x\":37493573,\"y\":122112430},{\"x\":37495378,\"y\":122114661},{\"x\":37496603,\"y\":122110455},{\"x\":37497591,\"y\":122106722},{\"x\":37494833,\"y\":122109597},{\"x\":37491155,\"y\":122111786},{\"x\":37495582,\"y\":122092689},{\"x\":37494220,\"y\":122091873},{\"x\":37497693,\"y\":122086895},{\"x\":37496331,\"y\":122079256},{\"x\":37493607,\"y\":122078741},{\"x\":37495310,\"y\":122066210},{\"x\":37493607,\"y\":122061489},{\"x\":37491973,\"y\":122054193},{\"x\":37500349,\"y\":122054279},{\"x\":37524722,\"y\":122053850},{\"x\":37531461,\"y\":122050674},{\"x\":37538744,\"y\":122051876},{\"x\":37540513,\"y\":122059858},{\"x\":37534796,\"y\":122065180},{\"x\":37535885,\"y\":122077110},{\"x\":37540309,\"y\":122079084},{\"x\":37543984,\"y\":122077024},{\"x\":37545957,\"y\":122081488},{\"x\":37550041,\"y\":122085007},{\"x\":37548339,\"y\":122090414},{\"x\":37542010,\"y\":122098654},{\"x\":37542283,\"y\":122104404},{\"x\":37543031,\"y\":122111700},{\"x\":37544733,\"y\":122113846},{\"x\":37548884,\"y\":122118395},{\"x\":37552422,\"y\":122128523},{\"x\":37550653,\"y\":122136591},{\"x\":37541126,\"y\":122142256},{\"x\":37523837,\"y\":122146376},{\"x\":37515872,\"y\":122147835},{\"x\":37509677,\"y\":122142685},{\"x\":37495173,\"y\":122130797}]";
//
//        String aoiDataPath = "data/aoi_data/" + cityName + "/" + cityName + "_poi_aoiinfo.txt";
//        String blockDataPath = "data/block_data/" + cityName + "/" + cityName + "_poi_blockinfo.txt";
//
//        double maxDistThres = 8000;
//
//        AoiSelectAlgo algo = new AoiSelectAlgo(aoiDataPath, blockDataPath);
//        algo.MAX_AREA_THRESHOLD = PolygonHelper.getArea(PolygonHelper.createPolygonFromArea(oldScope));
//
////        algo.loadAoiDistMap("data/aoi_data/" + cityName + "/" + cityName + "_poi_aoi_dist.txt");
////        algo.loadBlockDistMap("data/block_data/" + cityName + "/" + cityName + "_poi_block_dist.txt");
//
//        algo.compAoiScore();
//        algo.compBlockScore();
//        algo.selectAoi();
//        algo.selectBlock();
//
//        algo.write(poiId, oldScope, cityName, maxDistThres);

        // 上海配送范围绘制
//        long poiId = 2626593L;
//        String cityName = "shanghai";
//        String oldScope = "[{\"x\":31227519,\"y\":121572327},{\"x\":31228122,\"y\":121572397},{\"x\":31230765,\"y\":121571700},{\"x\":31233009,\"y\":121570767},{\"x\":31233571,\"y\":121570888},{\"x\":31234149,\"y\":121570512},{\"x\":31233517,\"y\":121570655},{\"x\":31232664,\"y\":121568335},{\"x\":31234252,\"y\":121567662},{\"x\":31234130,\"y\":121567840},{\"x\":31234130,\"y\":121569213},{\"x\":31236771,\"y\":121569214},{\"x\":31239593,\"y\":121574764},{\"x\":31238584,\"y\":121575362},{\"x\":31237138,\"y\":121572190},{\"x\":31236805,\"y\":121571779},{\"x\":31236430,\"y\":121571613},{\"x\":31234709,\"y\":121572088},{\"x\":31228565,\"y\":121574485},{\"x\":31228214,\"y\":121573586},{\"x\":31228029,\"y\":121573602},{\"x\":31228018,\"y\":121573655},{\"x\":31228682,\"y\":121575423},{\"x\":31229425,\"y\":121577260},{\"x\":31230806,\"y\":121581497},{\"x\":31231593,\"y\":121583288},{\"x\":31233279,\"y\":121582514},{\"x\":31235864,\"y\":121581267},{\"x\":31238540,\"y\":121579631},{\"x\":31241006,\"y\":121577803},{\"x\":31243402,\"y\":121582877},{\"x\":31245882,\"y\":121587080},{\"x\":31246084,\"y\":121587401},{\"x\":31246323,\"y\":121587515},{\"x\":31247117,\"y\":121588702},{\"x\":31247251,\"y\":121588724},{\"x\":31247426,\"y\":121588912},{\"x\":31249005,\"y\":121591091},{\"x\":31249640,\"y\":121591287},{\"x\":31250203,\"y\":121590864},{\"x\":31251904,\"y\":121588931},{\"x\":31252023,\"y\":121588910},{\"x\":31253786,\"y\":121586757},{\"x\":31255080,\"y\":121585010},{\"x\":31255415,\"y\":121584382},{\"x\":31255628,\"y\":121583699},{\"x\":31255620,\"y\":121583660},{\"x\":31255910,\"y\":121582340},{\"x\":31256400,\"y\":121580980},{\"x\":31258280,\"y\":121577890},{\"x\":31258410,\"y\":121577730},{\"x\":31258429,\"y\":121577736},{\"x\":31260554,\"y\":121575622},{\"x\":31259664,\"y\":121573334},{\"x\":31261596,\"y\":121573333},{\"x\":31261596,\"y\":121570587},{\"x\":31259901,\"y\":121569817},{\"x\":31259485,\"y\":121569010},{\"x\":31262471,\"y\":121566605},{\"x\":31266248,\"y\":121570645},{\"x\":31266274,\"y\":121570645},{\"x\":31266330,\"y\":121570590},{\"x\":31266960,\"y\":121569900},{\"x\":31267030,\"y\":121569860},{\"x\":31267072,\"y\":121569812},{\"x\":31267126,\"y\":121569794},{\"x\":31267305,\"y\":121569549},{\"x\":31269184,\"y\":121567419},{\"x\":31269005,\"y\":121567215},{\"x\":31267544,\"y\":121565551},{\"x\":31266477,\"y\":121564337},{\"x\":31266429,\"y\":121564282},{\"x\":31264707,\"y\":121562400},{\"x\":31263542,\"y\":121561265},{\"x\":31262742,\"y\":121560253},{\"x\":31261561,\"y\":121558962},{\"x\":31259695,\"y\":121556397},{\"x\":31256619,\"y\":121552504},{\"x\":31253609,\"y\":121547715},{\"x\":31253738,\"y\":121547554},{\"x\":31253679,\"y\":121547460},{\"x\":31249903,\"y\":121540650},{\"x\":31249903,\"y\":121541840},{\"x\":31251355,\"y\":121544361},{\"x\":31249376,\"y\":121545671},{\"x\":31247671,\"y\":121543355},{\"x\":31248627,\"y\":121542448},{\"x\":31246706,\"y\":121538520},{\"x\":31246722,\"y\":121536950},{\"x\":31243815,\"y\":121527251},{\"x\":31243647,\"y\":121523996},{\"x\":31243540,\"y\":121523904},{\"x\":31240628,\"y\":121524294},{\"x\":31239092,\"y\":121524337},{\"x\":31236775,\"y\":121525306},{\"x\":31235651,\"y\":121522168},{\"x\":31235517,\"y\":121522113},{\"x\":31230293,\"y\":121524489},{\"x\":31231416,\"y\":121521190},{\"x\":31231087,\"y\":121521089},{\"x\":31230972,\"y\":121521438},{\"x\":31229279,\"y\":121522141},{\"x\":31228848,\"y\":121520511},{\"x\":31228705,\"y\":121520460},{\"x\":31228446,\"y\":121520707},{\"x\":31228969,\"y\":121522292},{\"x\":31219777,\"y\":121525689},{\"x\":31220068,\"y\":121527111},{\"x\":31220662,\"y\":121528716},{\"x\":31218974,\"y\":121529302},{\"x\":31219026,\"y\":121530114},{\"x\":31219463,\"y\":121531790},{\"x\":31219227,\"y\":121533282},{\"x\":31218283,\"y\":121535757},{\"x\":31216359,\"y\":121534988},{\"x\":31216226,\"y\":121535073},{\"x\":31216278,\"y\":121535336},{\"x\":31217916,\"y\":121535986},{\"x\":31217124,\"y\":121538208},{\"x\":31216797,\"y\":121538192},{\"x\":31215256,\"y\":121543266},{\"x\":31213982,\"y\":121542402},{\"x\":31213904,\"y\":121542445},{\"x\":31214499,\"y\":121542757},{\"x\":31216050,\"y\":121544384},{\"x\":31217742,\"y\":121545683},{\"x\":31218846,\"y\":121548492},{\"x\":31218931,\"y\":121548657},{\"x\":31219051,\"y\":121549011},{\"x\":31219210,\"y\":121549417},{\"x\":31223316,\"y\":121561503},{\"x\":31226783,\"y\":121570367},{\"x\":31227519,\"y\":121572327}]";
//
//        String aoiDataPath = "data/aoi_data/" + cityName + "/" + cityName + "_poi_aoiinfo.txt";
//        String blockDataPath = "data/block_data/" + cityName + "/" + cityName + "_poi_blockinfo.txt";
//
//        double maxDistThres = 8000;
//
//        AoiSelectAlgo algo = new AoiSelectAlgo(aoiDataPath, blockDataPath);
//        algo.MAX_AREA_THRESHOLD = PolygonHelper.getArea(PolygonHelper.createPolygonFromArea(oldScope));
//
////        algo.loadAoiDistMap("data/aoi_data/" + cityName + "/" + cityName + "_poi_aoi_dist.txt");
////        algo.loadBlockDistMap("data/block_data/" + cityName + "/" + cityName + "_poi_block_dist.txt");
//
//        algo.compAoiScore();
//        algo.compBlockScore();
//        algo.selectAoi();
//        algo.selectBlock();
//
//        algo.write(poiId, oldScope, cityName, maxDistThres);

        // 武汉配送范围绘制

//        long poiId = 3254363L;
//        String cityName = "wuhan";
//        String oldScope = "[{\"x\":30444380,\"y\":114399747},{\"x\":30424154,\"y\":114419395},{\"x\":30422709,\"y\":114443492},{\"x\":30433712,\"y\":114449459},{\"x\":30439114,\"y\":114447283},{\"x\":30440023,\"y\":114459614},{\"x\":30440023,\"y\":114459528},{\"x\":30445906,\"y\":114459915},{\"x\":30450480,\"y\":114461453},{\"x\":30469281,\"y\":114459050},{\"x\":30466881,\"y\":114448499},{\"x\":30465956,\"y\":114436790},{\"x\":30462369,\"y\":114405972}]";
//
//        String aoiDataPath = "data/aoi_data/" + cityName + "/" + cityName + "_poi_aoiinfo.txt";
//        String blockDataPath = "data/block_data/" + cityName + "/" + cityName + "_poi_blockinfo.txt";
//
//        double maxDistThres = 8000;
//
//        AoiSelectAlgo algo = new AoiSelectAlgo(aoiDataPath, blockDataPath);
//        algo.MAX_AREA_THRESHOLD = PolygonHelper.getArea(PolygonHelper.createPolygonFromArea(oldScope));
//
////        algo.loadAoiDistMap("data/aoi_data/" + cityName + "/" + cityName + "_poi_aoi_dist.txt");
////        algo.loadBlockDistMap("data/block_data/" + cityName + "/" + cityName + "_poi_block_dist.txt");
//
//        algo.compAoiScore();
//        algo.compBlockScore();
//        algo.selectAoi();
//        algo.selectBlock();
//
//        algo.write(poiId, oldScope, cityName, maxDistThres);

        // 天津范围绘制
        long poiId = 2889785L;
        String cityName = "tianjin";
        String oldScope = "[{\"x\":39119682,\"y\":117109692},{\"x\":39105030,\"y\":117113125},{\"x\":39091708,\"y\":117123768},{\"x\":39083980,\"y\":117137844},{\"x\":39080249,\"y\":117159473},{\"x\":39082648,\"y\":117180416},{\"x\":39093307,\"y\":117200329},{\"x\":39107162,\"y\":117212002},{\"x\":39120747,\"y\":117211658},{\"x\":39132466,\"y\":117207539},{\"x\":39145514,\"y\":117199985},{\"x\":39157761,\"y\":117181103},{\"x\":39158560,\"y\":117161533},{\"x\":39157495,\"y\":117145740},{\"x\":39149508,\"y\":117127201},{\"x\":39135129,\"y\":117114841},{\"x\":39128737,\"y\":117111065},{\"x\":39119682,\"y\":117109692}]";

        String aoiDataPath = "data/aoi_data/" + cityName + "/" + cityName + "_poi_aoiinfo.txt";
        String blockDataPath = "data/block_data/" + cityName + "/" + cityName + "_poi_blockinfo.txt";

        double maxDistThres = 8000;

        AoiSelectAlgo algo = new AoiSelectAlgo(aoiDataPath, blockDataPath);
        algo.MAX_AREA_THRESHOLD = PolygonHelper.getArea(PolygonHelper.createPolygonFromArea(oldScope));

//        algo.loadAoiDistMap("data/aoi_data/" + cityName + "/" + cityName + "_poi_aoi_dist.txt");
//        algo.loadBlockDistMap("data/block_data/" + cityName + "/" + cityName + "_poi_block_dist.txt");

        algo.compAoiScore();
        algo.compBlockScore();
        algo.selectAoi();
        algo.selectBlock();

        algo.write(poiId, oldScope, cityName, maxDistThres);

//        try {
//            BufferedWriter bw = new BufferedWriter(new FileWriter("data/block_data/beijing/beijing_poi_aoi_dist.txt"));
//
//            int index = 0;
//            for (Map.Entry<Long, List<Long>> entry : algo.data.pid2BlockListMap.entrySet()) {
//
//                Point poiPoint = algo.data.pid2PoiMap.get(poiId).getPoiPoint();
//
//                for (long blockId : entry.getValue()) {
//                    Point blockCentroidPoint = algo.data.bid2BlockMap.get(blockId).centroidPoint;
//                    if (GeoUtils.getPointDist(algo.data.pid2PoiMap.get(poiId).getPoiPoint(), algo.data.bid2BlockMap.get(blockId).centroidPoint) > 8000.0) {
//                        continue;
//                    }
//                    System.out.println("- current request index: " + index);
//                    double dist = AmapUtils.getDistance(index, poiPoint, blockCentroidPoint);
//                    bw.write(String.valueOf(poiId) + "," + String.valueOf(blockId) + "," + String.valueOf(dist) + "\n");
//                    index += 1;
//                }
//
//            }
//
//            bw.close();
//        } catch (Exception e) {
//            System.out.println("Writing file failed!");
//        }

//        algo.writeJsDataFileBlock(poiId, oldScope, cityName, maxDistThres);

        System.out.println("HELLO!");

//        long poiId = 4907742L;
//        String cityName = "beijing_amap_drive";
//        String oldScope = "[{\"x\":39968603,\"y\":116453248},{\"x\":39970163,\"y\":116455178},{\"x\":39970394,\"y\":116456609},{\"x\":39970565,\"y\":116456619},{\"x\":39970945,\"y\":116456097},{\"x\":39975092,\"y\":116463107},{\"x\":39972690,\"y\":116466184},{\"x\":39971860,\"y\":116466540},{\"x\":39970089,\"y\":116466110},{\"x\":39969276,\"y\":116465460},{\"x\":39968556,\"y\":116465182},{\"x\":39969281,\"y\":116466107},{\"x\":39968895,\"y\":116466957},{\"x\":39969050,\"y\":116467441},{\"x\":39969963,\"y\":116468300},{\"x\":39969577,\"y\":116469090},{\"x\":39970451,\"y\":116472089},{\"x\":39971998,\"y\":116471755},{\"x\":39972721,\"y\":116471925},{\"x\":39973406,\"y\":116472339},{\"x\":39975267,\"y\":116474280},{\"x\":39975617,\"y\":116474542},{\"x\":39975752,\"y\":116474413},{\"x\":39977247,\"y\":116475911},{\"x\":39973901,\"y\":116471654},{\"x\":39974375,\"y\":116472120},{\"x\":39974731,\"y\":116472146},{\"x\":39979301,\"y\":116477215},{\"x\":39979209,\"y\":116477328},{\"x\":39979364,\"y\":116477783},{\"x\":39979749,\"y\":116478275},{\"x\":39979669,\"y\":116478645},{\"x\":39977977,\"y\":116481285},{\"x\":39973745,\"y\":116476602},{\"x\":39973585,\"y\":116476616},{\"x\":39971996,\"y\":116479095},{\"x\":39971588,\"y\":116478646},{\"x\":39971412,\"y\":116478717},{\"x\":39971834,\"y\":116479381},{\"x\":39971197,\"y\":116480850},{\"x\":39970857,\"y\":116482651},{\"x\":39968520,\"y\":116482411},{\"x\":39967919,\"y\":116482081},{\"x\":39967769,\"y\":116482175},{\"x\":39968360,\"y\":116489709},{\"x\":39968248,\"y\":116489872},{\"x\":39968384,\"y\":116489983},{\"x\":39972215,\"y\":116489981},{\"x\":39971898,\"y\":116490629},{\"x\":39971809,\"y\":116491339},{\"x\":39971769,\"y\":116499479},{\"x\":39973622,\"y\":116499555},{\"x\":39973709,\"y\":116503053},{\"x\":39976502,\"y\":116503041},{\"x\":39980268,\"y\":116503873},{\"x\":39980239,\"y\":116506239},{\"x\":39980475,\"y\":116506452},{\"x\":39980579,\"y\":116503912},{\"x\":39987860,\"y\":116503960},{\"x\":39987900,\"y\":116506885},{\"x\":39988120,\"y\":116508395},{\"x\":39988619,\"y\":116509869},{\"x\":39988755,\"y\":116509907},{\"x\":39988769,\"y\":116509894},{\"x\":39988819,\"y\":116510117},{\"x\":39988762,\"y\":116510173},{\"x\":39990447,\"y\":116510710},{\"x\":39991917,\"y\":116511881},{\"x\":39991917,\"y\":116511864},{\"x\":39992378,\"y\":116512146},{\"x\":39995399,\"y\":116511208},{\"x\":39995395,\"y\":116511154},{\"x\":39995376,\"y\":116509045},{\"x\":39998073,\"y\":116509061},{\"x\":39999210,\"y\":116508748},{\"x\":39999211,\"y\":116508748},{\"x\":39999320,\"y\":116508718},{\"x\":40000064,\"y\":116508288},{\"x\":40001606,\"y\":116506986},{\"x\":40003229,\"y\":116504992},{\"x\":40005220,\"y\":116507216},{\"x\":40005641,\"y\":116507207},{\"x\":40012433,\"y\":116513434},{\"x\":40015912,\"y\":116506561},{\"x\":40023537,\"y\":116505384},{\"x\":40022832,\"y\":116498512},{\"x\":40033432,\"y\":116497263},{\"x\":40033062,\"y\":116479906},{\"x\":40033684,\"y\":116470923},{\"x\":40029650,\"y\":116465506},{\"x\":40028003,\"y\":116463032},{\"x\":40027807,\"y\":116463058},{\"x\":40027985,\"y\":116459760},{\"x\":40028662,\"y\":116459724},{\"x\":40027010,\"y\":116459449},{\"x\":40025679,\"y\":116459919},{\"x\":40023654,\"y\":116458285},{\"x\":40020844,\"y\":116456830},{\"x\":40021145,\"y\":116451606},{\"x\":40021040,\"y\":116451499},{\"x\":40017716,\"y\":116451619},{\"x\":40017520,\"y\":116452485},{\"x\":40017005,\"y\":116452653},{\"x\":40016226,\"y\":116455198},{\"x\":40014829,\"y\":116454808},{\"x\":40015421,\"y\":116453668},{\"x\":40014419,\"y\":116454402},{\"x\":40014504,\"y\":116455402},{\"x\":40008288,\"y\":116453326},{\"x\":40008111,\"y\":116447251},{\"x\":40008506,\"y\":116439113},{\"x\":40008089,\"y\":116438819},{\"x\":40004681,\"y\":116438819},{\"x\":40002763,\"y\":116438424},{\"x\":40002720,\"y\":116438213},{\"x\":40002351,\"y\":116438127},{\"x\":40002950,\"y\":116436352},{\"x\":40003360,\"y\":116433022},{\"x\":40003264,\"y\":116432909},{\"x\":40005016,\"y\":116428524},{\"x\":40005015,\"y\":116425479},{\"x\":40001719,\"y\":116425233},{\"x\":39998881,\"y\":116424746},{\"x\":39993715,\"y\":116424187},{\"x\":39989187,\"y\":116423947},{\"x\":39988909,\"y\":116425035},{\"x\":39989178,\"y\":116426842},{\"x\":39989333,\"y\":116430848},{\"x\":39988894,\"y\":116430420},{\"x\":39988775,\"y\":116430564},{\"x\":39988760,\"y\":116437612},{\"x\":39988174,\"y\":116439147},{\"x\":39986890,\"y\":116440786},{\"x\":39986344,\"y\":116440952},{\"x\":39985580,\"y\":116440770},{\"x\":39986203,\"y\":116441287},{\"x\":39986002,\"y\":116441766},{\"x\":39984469,\"y\":116440834},{\"x\":39985667,\"y\":116442583},{\"x\":39986160,\"y\":116443861},{\"x\":39986198,\"y\":116444396},{\"x\":39985943,\"y\":116445692},{\"x\":39985328,\"y\":116447378},{\"x\":39983429,\"y\":116450464},{\"x\":39983051,\"y\":116448097},{\"x\":39981645,\"y\":116445118},{\"x\":39983594,\"y\":116443309},{\"x\":39984136,\"y\":116440746},{\"x\":39981455,\"y\":116439105},{\"x\":39978679,\"y\":116437088},{\"x\":39978519,\"y\":116437161},{\"x\":39978027,\"y\":116442913},{\"x\":39976112,\"y\":116442850},{\"x\":39975206,\"y\":116443517},{\"x\":39972611,\"y\":116447060},{\"x\":39972052,\"y\":116446611},{\"x\":39971850,\"y\":116446984},{\"x\":39972389,\"y\":116447532},{\"x\":39969879,\"y\":116451076},{\"x\":39969828,\"y\":116450620},{\"x\":39969636,\"y\":116450589},{\"x\":39969623,\"y\":116450955},{\"x\":39969451,\"y\":116451025},{\"x\":39969515,\"y\":116451503},{\"x\":39968617,\"y\":116452781},{\"x\":39968603,\"y\":116453248},{\"x\":39968603,\"y\":116453248}]";
//        String dataPath = "beijing_poi_aoiinfo.txt";
//
//        double maxAoiDistThres = 8000;
//
//        AoiSelectAlgo algo = new AoiSelectAlgo(dataPath);
//        algo.loadDistMap("beijing_poi_aoi_dist.txt");
////        algo.compAoiScore("beijing_poi_aoi_dist.txt");
//        algo.selectAoi();
////        algo.run();
//        algo.writeJsDataFile(poiId, dataPath, oldScope, cityName, maxAoiDistThres);



//        long poiId = 2581733L;
//        String cityName = "qingdao_aoiinfo";
//        String oldScope = "[{\"y\":120446028,\"x\":36071742},{\"y\":120445953,\"x\":36071896},{\"y\":120437391,\"x\":36072544},{\"y\":120445689,\"x\":36076872},{\"y\":120448304,\"x\":36080224},{\"y\":120454943,\"x\":36080822},{\"y\":120457642,\"x\":36083132},{\"y\":120461664,\"x\":36083132},{\"y\":120459071,\"x\":36081311},{\"y\":120459107,\"x\":36081134},{\"y\":120465393,\"x\":36079773},{\"y\":120514485,\"x\":36091362},{\"y\":120516306,\"x\":36095763},{\"y\":120511699,\"x\":36100997},{\"y\":120506367,\"x\":36105198},{\"y\":120515202,\"x\":36108821},{\"y\":120515148,\"x\":36109149},{\"y\":120507934,\"x\":36109560},{\"y\":120507893,\"x\":36109784},{\"y\":120499941,\"x\":36110391},{\"y\":120499802,\"x\":36110219},{\"y\":120499802,\"x\":36095216},{\"y\":120498440,\"x\":36095198},{\"y\":120497094,\"x\":36095366},{\"y\":120492334,\"x\":36096486},{\"y\":120492458,\"x\":36099712},{\"y\":120492212,\"x\":36100699},{\"y\":120490619,\"x\":36102401},{\"y\":120489765,\"x\":36104758},{\"y\":120490811,\"x\":36105514},{\"y\":120490541,\"x\":36106213},{\"y\":120488899,\"x\":36106726},{\"y\":120488742,\"x\":36107088},{\"y\":120487692,\"x\":36108018},{\"y\":120485622,\"x\":36109136},{\"y\":120482592,\"x\":36109646},{\"y\":120480645,\"x\":36109707},{\"y\":120481543,\"x\":36111386},{\"y\":120483672,\"x\":36114205},{\"y\":120485656,\"x\":36113570},{\"y\":120486190,\"x\":36114448},{\"y\":120486099,\"x\":36115219},{\"y\":120484648,\"x\":36115676},{\"y\":120485356,\"x\":36117677},{\"y\":120486116,\"x\":36139803},{\"y\":120491158,\"x\":36138942},{\"y\":120488527,\"x\":36142577},{\"y\":120486889,\"x\":36144394},{\"y\":120487172,\"x\":36145616},{\"y\":120487059,\"x\":36145820},{\"y\":120485403,\"x\":36145928},{\"y\":120484496,\"x\":36145776},{\"y\":120482475,\"x\":36144840},{\"y\":120482128,\"x\":36144926},{\"y\":120473225,\"x\":36149325},{\"y\":120472455,\"x\":36149811},{\"y\":120472582,\"x\":36150154},{\"y\":120472246,\"x\":36150290},{\"y\":120468248,\"x\":36147468},{\"y\":120465454,\"x\":36145944},{\"y\":120461812,\"x\":36144840},{\"y\":120459235,\"x\":36143837},{\"y\":120459232,\"x\":36143654},{\"y\":120459638,\"x\":36143479},{\"y\":120458888,\"x\":36141780},{\"y\":120458686,\"x\":36140814},{\"y\":120459516,\"x\":36137537},{\"y\":120449350,\"x\":36135200},{\"y\":120448323,\"x\":36141301},{\"y\":120451901,\"x\":36142521},{\"y\":120448384,\"x\":36141833},{\"y\":120445810,\"x\":36140686},{\"y\":120444048,\"x\":36140124},{\"y\":120440976,\"x\":36139733},{\"y\":120440788,\"x\":36143523},{\"y\":120441018,\"x\":36145932},{\"y\":120440485,\"x\":36147698},{\"y\":120445384,\"x\":36147802},{\"y\":120446095,\"x\":36148043},{\"y\":120448074,\"x\":36149264},{\"y\":120449012,\"x\":36150652},{\"y\":120448966,\"x\":36150878},{\"y\":120446885,\"x\":36151642},{\"y\":120442798,\"x\":36151718},{\"y\":120439386,\"x\":36152660},{\"y\":120439107,\"x\":36154603},{\"y\":120438818,\"x\":36155045},{\"y\":120435906,\"x\":36154489},{\"y\":120435801,\"x\":36153490},{\"y\":120436064,\"x\":36152440},{\"y\":120436190,\"x\":36150962},{\"y\":120435874,\"x\":36149821},{\"y\":120432173,\"x\":36149635},{\"y\":120429982,\"x\":36148917},{\"y\":120427794,\"x\":36148858},{\"y\":120427405,\"x\":36147570},{\"y\":120427226,\"x\":36144962},{\"y\":120423241,\"x\":36145449},{\"y\":120422397,\"x\":36145331},{\"y\":120422044,\"x\":36136156},{\"y\":120420834,\"x\":36135182},{\"y\":120419800,\"x\":36134523},{\"y\":120418356,\"x\":36134816},{\"y\":120414634,\"x\":36134370},{\"y\":120412150,\"x\":36134754},{\"y\":120410305,\"x\":36135236},{\"y\":120409866,\"x\":36134834},{\"y\":120409936,\"x\":36134531},{\"y\":120413620,\"x\":36132706},{\"y\":120413298,\"x\":36132378},{\"y\":120413361,\"x\":36132059},{\"y\":120415008,\"x\":36131322},{\"y\":120413859,\"x\":36130525},{\"y\":120411502,\"x\":36128355},{\"y\":120412128,\"x\":36127082},{\"y\":120414260,\"x\":36125194},{\"y\":120413182,\"x\":36125036},{\"y\":120412342,\"x\":36124682},{\"y\":120412183,\"x\":36124294},{\"y\":120409523,\"x\":36121803},{\"y\":120408433,\"x\":36120553},{\"y\":120408979,\"x\":36119882},{\"y\":120411241,\"x\":36118852},{\"y\":120411132,\"x\":36117536},{\"y\":120411395,\"x\":36116276},{\"y\":120408322,\"x\":36116118},{\"y\":120408244,\"x\":36114030},{\"y\":120407604,\"x\":36111632},{\"y\":120401259,\"x\":36112526},{\"y\":120399871,\"x\":36111094},{\"y\":120398697,\"x\":36110343},{\"y\":120398696,\"x\":36110124},{\"y\":120398850,\"x\":36110042},{\"y\":120399811,\"x\":36110681},{\"y\":120400572,\"x\":36109955},{\"y\":120399378,\"x\":36108773},{\"y\":120399057,\"x\":36105354},{\"y\":120401471,\"x\":36104358},{\"y\":120401422,\"x\":36104081},{\"y\":120398207,\"x\":36104039},{\"y\":120398114,\"x\":36103909},{\"y\":120399175,\"x\":36100713},{\"y\":120398784,\"x\":36099174},{\"y\":120399005,\"x\":36097145},{\"y\":120399248,\"x\":36096793},{\"y\":120402627,\"x\":36098528},{\"y\":120403678,\"x\":36097968},{\"y\":120403949,\"x\":36097648},{\"y\":120403081,\"x\":36097067},{\"y\":120402774,\"x\":36096551},{\"y\":120402765,\"x\":36096121},{\"y\":120403246,\"x\":36094536},{\"y\":120403415,\"x\":36094499},{\"y\":120404596,\"x\":36095834},{\"y\":120408827,\"x\":36097064},{\"y\":120411672,\"x\":36098613},{\"y\":120413314,\"x\":36098762},{\"y\":120417518,\"x\":36098158},{\"y\":120419581,\"x\":36094676},{\"y\":120418248,\"x\":36093903},{\"y\":120416570,\"x\":36092340},{\"y\":120414656,\"x\":36089608},{\"y\":120414317,\"x\":36089543},{\"y\":120410722,\"x\":36084474},{\"y\":120409875,\"x\":36083868},{\"y\":120407020,\"x\":36085293},{\"y\":120407739,\"x\":36084654},{\"y\":120406847,\"x\":36083677},{\"y\":120406924,\"x\":36083206},{\"y\":120408581,\"x\":36083132},{\"y\":120408515,\"x\":36082900},{\"y\":120408815,\"x\":36082759},{\"y\":120409594,\"x\":36083132},{\"y\":120445712,\"x\":36083132},{\"y\":120445283,\"x\":36082003},{\"y\":120442992,\"x\":36082324},{\"y\":120440658,\"x\":36080903},{\"y\":120437445,\"x\":36076953},{\"y\":120437315,\"x\":36075886},{\"y\":120436852,\"x\":36076005},{\"y\":120435866,\"x\":36077487},{\"y\":120435612,\"x\":36077528},{\"y\":120434714,\"x\":36076188},{\"y\":120432376,\"x\":36074994},{\"y\":120431302,\"x\":36075005},{\"y\":120429990,\"x\":36075598},{\"y\":120428380,\"x\":36074073},{\"y\":120430971,\"x\":36069816},{\"y\":120434590,\"x\":36071338},{\"y\":120435384,\"x\":36069778},{\"y\":120435382,\"x\":36069482},{\"y\":120435756,\"x\":36069299},{\"y\":120436827,\"x\":36067658},{\"y\":120443082,\"x\":36071154},{\"y\":120443755,\"x\":36071304},{\"y\":120444954,\"x\":36070958},{\"y\":120445647,\"x\":36071204},{\"y\":120446028,\"x\":36071742}]";
//        String dataPath = "qingdao_poi_aoiinfo.txt";
//
//        double maxAoiDistThres = 8000;
//
//        AoiSelectAlgo algo = new AoiSelectAlgo(dataPath);
//        algo.loadAoiDistMap("qingdao_poi_aoi_dist.txt");
//        algo.run();
//        algo.writeJSDataFileWithAoiInfo(poiId, dataPath, oldScope, cityName, maxAoiDistThres);




        //        algo.run();

//        algo.writeGeo2GeoFile("geo2geo_beijing_4907742.txt");
//        try {
//            BufferedWriter bw = new BufferedWriter(new FileWriter("data/block_data/beijing/beijing_poi_aoi_dist.txt"));
//
//            int index = 0;
//            for (Map.Entry<Long, List<Long>> entry : algo.data.pid2AoiListMap.entrySet()) {
//                Point poiPoint = algo.data.pid2PoiMap.get(poiId).getPoiPoint();
//                for (long aoiId : entry.getValue()) {
//                    Point aoiCentroidPoint = algo.data.aid2AoiMap.get(aoiId).getCentroidPoint();
//                    if (GeoUtils.getPointDist(algo.data.pid2PoiMap.get(poiId).getPoiPoint(), algo.data.aid2AoiMap.get(aoiId).getCentroidPoint()) > 8000.0) {
//                        continue;
//                    }
//                    System.out.println("- current request index: " + index);
//                    double dist = AmapUtils.getDistance(index, poiPoint, aoiCentroidPoint);
//                    bw.write(String.valueOf(poiId) + "," + String.valueOf(aoiId) + "," + String.valueOf(dist) + "\n");
//                    index += 1;
//                }
//            }
//
//            bw.close();
//        } catch (Exception e) {
//            System.out.println("Writing file failed!");
//        }
//
//        System.out.println("AMAP Generated.");
    }
}
